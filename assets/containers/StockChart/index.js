import {withRouter} from 'react-router-dom'
import React from 'react'
import {observer} from 'mobx-react'
import AnyChart from 'anychart-react'
import anychart from 'anychart'

// 普通图表配置
// const complexSettings = {
//   width: 400,
//   height: 300,
//   type: 'column',
//   data: 'P1,5\nP2,3\nP3,6\nP4,4',
//   title: 'Column chart',
//   yAxis: [1, {
//     orientation: 'right',
//     enabled: true,
//     labels: {
//       format: '{%Value}{decimalPoint:\\,}',
//       fontColor: 'red'
//     }
//   }],
//   legend: {
//     background: 'lightgreen 0.4',
//     padding: 0
//   },
//   lineMarker: {
//     value: 4.5
//   }
// }

@withRouter
@observer
export default class StockChart extends React.Component {
  render () {
    let table = anychart.data.table()
    table.addData([
      ['2004-01-02', 92.86, 93.05, 91.20, 91.55],
      ['2004-01-05', 92.00, 93.09, 92.00, 93.05],
      ['2004-01-06', 92.20, 93.19, 92.14, 93.06],
      ['2004-01-07', 93.14, 93.38, 92.47, 92.78],
      ['2004-01-08', 93.21, 93.21, 92.03, 93.04],
      ['2004-01-09', 91.75, 92.35, 91.00, 91.21],
      ['2004-01-12', 91.21, 92.14, 91.21, 91.55],
      ['2004-01-13', 91.45, 91.51, 89.01, 89.70],
      ['2004-01-14', 89.90, 90.46, 89.75, 90.31],
      ['2004-01-15', 95.07, 95.65, 93.55, 94.02],
      ['2004-01-16', 95.00, 95.35, 94.71, 95.32],
      ['2004-01-20', 96.00, 97.44, 95.73, 97.10],
      ['2004-01-21', 97.23, 98.04, 96.64, 97.70],
      ['2004-01-22', 97.84, 98.16, 97.32, 97.51],
      ['2004-01-23', 97.82, 98.21, 97.10, 97.90],
      ['2004-01-26', 97.90, 99.85, 97.56, 99.85],
      ['2004-01-27', 99.40, 99.67, 98.70, 98.80],
      ['2004-01-28', 99.15, 99.42, 97.28, 97.38],
      ['2004-01-29', 98.10, 98.60, 96.55, 98.01],
      ['2004-01-30', 98.02, 99.33, 97.84, 99.23],
      ['2004-02-02', 99.15, 99.94, 98.50, 99.39],
      ['2004-02-03', 99.00, 99.00, 98.95, 99.00],
      ['2004-02-04', 99.38, 99.43, 99.30, 99.19],
      ['2004-02-05', 99.00, 99.09, 98.26, 98.86],
      ['2004-02-06', 98.85, 99.24, 98.25, 98.94],
      ['2004-02-09', 99.31, 99.44, 98.60, 98.95],
      ['2004-02-10', 98.45, 99.97, 98.41, 99.61],
      ['2004-02-11', 99.20, 99.31, 98.80, 99.96],
      ['2004-02-12', 99.06, 99.30, 99.30, 99.30],
      ['2004-02-13', 99.10, 99.99, 99.08, 99.71],
      ['2004-02-17', 99.99, 99.00, 99.32, 99.37],
      ['2004-02-18', 99.31, 99.77, 98.15, 98.42],
      ['2004-02-19', 98.42, 99.23, 97.52, 97.80],
      ['2004-02-20', 98.60, 98.60, 97.19, 97.31],
      ['2004-02-23', 97.40, 97.51, 95.46, 95.96],
      ['2004-02-24', 95.20, 97.46, 95.20, 96.79],
      ['2004-02-25', 96.50, 97.09, 96.23, 96.54],
      ['2004-02-26', 96.27, 97.26, 96.25, 96.79],
      ['2004-02-27', 96.80, 97.38, 96.10, 96.50],
      ['2004-03-01', 96.50, 97.25, 96.15, 97.04],
      ['2004-03-02', 97.60, 97.60, 96.62, 96.82],
      ['2004-03-03', 96.57, 96.89, 95.60, 96.84],
      ['2004-03-04', 96.58, 96.92, 96.13, 96.39],
      ['2004-03-05', 95.95, 96.98, 95.56, 96.45],
      ['2004-03-08', 96.49, 96.88, 94.59, 94.59],
      ['2004-03-09', 94.30, 95.28, 93.77, 94.53],
      ['2004-03-10', 94.38, 94.74, 92.68, 93.06],
      ['2004-03-11', 92.00, 92.98, 91.15, 91.21],
      ['2004-03-12', 92.00, 93.38, 91.68, 93.30],
      ['2004-03-15', 92.60, 92.69, 90.88, 91.82]
    ])

    // map the data
    let mapping = table.mapAs()
    mapping.addField('open', 1)
    mapping.addField('high', 2)
    mapping.addField('low', 3)
    mapping.addField('close', 4)
    let chart = anychart.stock()
    let series = chart.plot(0).candlestick(mapping)
    series.name('股价图')
    return (
      <div>
        <AnyChart
          width={800}
          height={400}
          instance={chart}
          title="Stock demo"
        />
      </div>
    )
  }
}
